#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ¨ Formatando arquivos C# com CSharpier..."
dotnet csharpier . --check || (
    echo "âŒ Alguns arquivos precisam de formataÃ§Ã£o. Executando o formatador..."
    dotnet csharpier .
    echo "âœ… Arquivos formatados com sucesso!"
    git add .
)

echo "ğŸ” Verificando estilo de cÃ³digo com dotnet format..."
dotnet format style . --verify-no-changes --verbosity detailed || (
    echo "âŒ Problemas de estilo de cÃ³digo encontrados. Executando o formatador..."
    dotnet format style .
    echo "âœ… Estilo de cÃ³digo corrigido com sucesso!"
    git add .
)

echo "ğŸš€ Pronto para fazer commit das mudanÃ§as!"

echo "ğŸ› ï¸ Formatando arquivos em estÃ¡gio..."
dotnet husky run --name dotnet-format-csharpier
dotnet husky run --name dotnet-format-staged-files

echo "âœ… ConcluÃ­das as alteraÃ§Ãµes de prÃ©-commit"
dotnet husky run
